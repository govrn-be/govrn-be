
---
import CSRDCategoryCard from './CSRDCategoryCard.astro';
import CSRDCategoryDetails from './CSRDCategoryDetails.astro';
import ActivityLog from '../dashboard/ActivityLog.astro';
import MetricCard from '../dashboard/MetricCard.astro';

const selectedCategory = {
  title: "Environmental Impact",
  score: 85,
  status: 'good',
  requirement: "Climate change mitigation and adaptation strategies",
  analysis: {
    strengths: [
      "Comprehensive climate risk assessment in place",
      "Clear emission reduction targets established",
      "Regular environmental impact monitoring"
    ],
    gaps: [
      "Limited scope 3 emissions data",
      "Incomplete supplier environmental assessments"
    ],
    recommendations: [
      "Expand scope 3 emissions tracking",
      "Implement supplier environmental scoring",
      "Enhance climate risk disclosures"
    ]
  },
  documents: [
    {
      title: "Board Meeting Minutes - Q1 2024",
      type: "Meeting Minutes",
      date: "2024-03-15",
      relevance: 95,
      excerpt: "Board approved new climate action targets including 50% reduction in emissions by 2030"
    },
    {
      title: "Environmental Policy Update",
      type: "Policy Document",
      date: "2024-02-28",
      relevance: 90
    },
    {
      title: "Sustainability Report 2023",
      type: "Annual Report",
      date: "2024-01-15",
      relevance: 85,
      excerpt: "Detailed analysis of current environmental impact and mitigation strategies"
    }
  ]
};

// Rest of the props remain the same as in ComplianceAnimation.astro
---

<div class="relative w-full min-h-[600px] bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden">
  <!-- Same header as before -->
  
  <div class="p-8">
    <!-- Top Metrics -->
    <div class="grid grid-cols-2 gap-6 mb-8">
      {metrics.map(metric => (
        <MetricCard {...metric} />
      ))}
    </div>

    <!-- Main Content Grid -->
    <div class="grid lg:grid-cols-3 gap-8">
      <!-- CSRD Categories List -->
      <div class="space-y-4">
        {csrdCategories.map((category, index) => (
          <CSRDCategoryCard {...category} index={index} />
        ))}
      </div>

      <!-- Selected Category Details -->
      <div class="lg:col-span-2">
        <CSRDCategoryDetails {...selectedCategory} />
      </div>
    </div>
  </div>
</div>
