---
import Layout from '../layouts/Layout.astro';
import BoardResolution from '../components/404/BoardResolution.astro';
import NavigationSuggestions from '../components/404/NavigationSuggestions.astro';
import PageIllustration from '../components/404/PageIllustration.astro';
import { getRandomJoke } from '../utils/boardJokes';

const suggestions = [
  {
    text: "Return to Dashboard",
    href: "/",
    icon: "üè†"
  },
  {
    text: "View Board Features",
    href: "/features",
    icon: "‚ú®"
  },
  {
    text: "Contact Support",
    href: "/contact",
    icon: "ü§ù"
  }
];

const currentDate = new Date().toLocaleDateString();
const randomJoke = getRandomJoke();
---

<Layout title="404 - Page Not Found | Govrn" description="Oops! The page you're looking for doesn't exist. Let's get you back on track.">
  <main class="min-h-screen pt-24 pb-12 flex flex-col">
    <div class="flex-grow flex items-center">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
        <div class="text-center">
          <PageIllustration emoji="üìã" />

          <h1 class="text-4xl font-extrabold text-gray-900 tracking-tight sm:text-5xl mb-4">
            404: Motion Not Found
          </h1>

          <p class="text-xl text-gray-600 mb-8">{randomJoke}</p>

          <BoardResolution date={currentDate} />
          <NavigationSuggestions suggestions={suggestions} />
        </div>
      </div>
    </div>

    <div class="text-center text-gray-500 mt-12">
      <p class="text-sm">
        P.S. Our AI assistant has noted this missing page for the next board meeting agenda.
      </p>
    </div>
  </main>
</Layout>

<script>
  const url = new URL(window.location);
  if (url.pathname.endsWith('/')) {
    url.pathname = url.pathname.slice(0, -1);
    window.location.replace(url.href);
  }
</script>