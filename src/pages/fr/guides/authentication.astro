---
import Layout from '../../../layouts/Layout.astro';
import GuideHeader from '../../../components/guides/GuideHeader.astro';
import GuideStep from '../../../components/guides/GuideStep.astro';
import GuideSubSection from '../../../components/guides/GuideSubSection.astro';
import GuideStepList from '../../../components/guides/GuideStepList.astro';
import ProTip from '../../../components/guides/ProTip.astro';

const signUpSteps = [
  "Ouvrez l'e-mail d'invitation Govrn",
  "Cliquez sur 'Accepter l'invitation'", 
  "Sélectionnez votre pays",
  "Renseignez votre numéro de mobile",
  "Saisissez le code reçu par SMS",
  "Créez un mot de passe robuste (8 caractères minimum)",
  "Acceptez les conditions d'utilisation",
  "Validez votre inscription"
];

const signInSteps = [
  "Rendez-vous sur app.govrn.com",
  "Saisissez votre adresse e-mail",
  "Entrez votre mot de passe",
  "Cliquez sur 'Se connecter'",
  "Renseignez le code 2FA reçu sur votre mobile",
  "Validez pour accéder à votre espace"
];

const resetPasswordSteps = [
  "Cliquez sur 'Mot de passe oublié ?'",
  "Indiquez votre adresse e-mail",
  "Lancez la réinitialisation",
  "Consultez l'e-mail reçu",
  "Cliquez sur le lien de réinitialisation",
  "Définissez votre nouveau mot de passe",
  "Enregistrez les modifications"
];

const twoFactorTroubleshooting = [
  "Patientez 30 secondes avant de demander un nouveau code",
  "Vérifiez la réception réseau de votre mobile",
  "Confirmez l'exactitude de votre numéro",
  "Contactez le support en cas de difficulté"
];

const resetPasswordTroubleshooting = [
  "Vérifiez vos courriers indésirables",
  "Ajoutez support@govrn.com à vos contacts",
  "Demandez un nouveau lien après 24h",
  "Videz le cache de votre navigateur"
];

const firewallTroubleshooting = [
  "Vérifiez que prod.api.ongovrn.com est autorisé",
  "Contrôlez les paramètres du pare-feu",
  "Autorisez le trafic HTTPS (port 443)",
  "Contactez votre service informatique si nécessaire"
];
---

<Layout title="Guide d'authentification Govrn - Connexion sécurisée">
  <main class="pt-24">
    <article class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
      <GuideHeader
        title="Accédez à votre espace Govrn en toute sécurité"
        description="Guide complet pour créer votre compte, vous connecter et gérer vos paramètres d'authentification en toute sérénité."
      />

      <GuideStep
        number={1}
        title="Création de votre compte"
        description="Suivez ces étapes pour configurer votre accès Govrn suite à votre invitation :"
      >
        <div class="mb-8">
          <GuideStepList items={signUpSteps} />
        </div>

        <ProTip
          tip="Optez pour un mot de passe robuste combinant lettres, chiffres et symboles. Ne partagez jamais vos identifiants ou codes 2FA."
        />

        <GuideSubSection title="Critères de sécurité">
          <div class="bg-white rounded-lg p-4 border border-gray-200">
            <ul class="space-y-2 text-gray-600">
              <li>• Minimum 8 caractères</li>
              <li>• Au moins une majuscule</li>
              <li>• Au moins un chiffre</li>
              <li>• Au moins un caractère spécial</li>
            </ul>
          </div>
        </GuideSubSection>
      </GuideStep>

      <GuideStep
        number={2}
        title="Connexion sécurisée"
        description="Accédez à votre espace Govrn en suivant ces étapes :"
      >
        <div class="mb-8">
          <GuideStepList items={signInSteps} />
        </div>

        <ProTip
          tip="L'option 'Rester connecté' est recommandée uniquement sur vos appareils personnels sécurisés."
        />

        <GuideSubSection title="Double authentification (2FA)">
          <div class="grid md:grid-cols-2 gap-4">
            <div class="bg-white rounded-lg p-4 border border-gray-200">
              <h4 class="font-semibold text-gray-900 mb-2">Pourquoi la 2FA ?</h4>
              <ul class="text-sm text-gray-600 space-y-1">
                <li>• Protection renforcée</li>
                <li>• Accès sécurisé garanti</li>
                <li>• Confidentialité assurée</li>
              </ul>
            </div>
            <div class="bg-white rounded-lg p-4 border border-gray-200">
              <h4 class="font-semibold text-gray-900 mb-2">Dépannage</h4>
              <ul class="text-sm text-gray-600 space-y-1">
                {twoFactorTroubleshooting.map(step => (
                  <li>• {step}</li>
                ))}
              </ul>
            </div>
          </div>
        </GuideSubSection>
      </GuideStep>

      <GuideStep
        number={3}
        title="Réinitialisation du mot de passe"
        description="En cas d'oubli, voici la procédure à suivre :"
      >
        <div class="mb-8">
          <GuideStepList items={resetPasswordSteps} />
        </div>

        <ProTip
          tip="Les liens de réinitialisation expirent après 24h pour votre sécurité. N'hésitez pas à en demander un nouveau si nécessaire."
        />
      </GuideStep>

      <GuideStep
        number={4}
        title="Résolution des problèmes courants"
        description="Solutions aux difficultés d'authentification fréquentes :"
      >
        <div class="grid md:grid-cols-2 gap-6">
          <GuideSubSection title="Problèmes de réinitialisation">
            <div class="bg-white rounded-lg p-4 border border-gray-200">
              <ul class="text-sm text-gray-600 space-y-2">
                {resetPasswordTroubleshooting.map(step => (
                  <li>• {step}</li>
                ))}
              </ul>
            </div>
          </GuideSubSection>

          <GuideSubSection title="Accès & Pare-feu">
            <div class="bg-white rounded-lg p-4 border border-gray-200">
              <ul class="text-sm text-gray-600 space-y-2">
                {firewallTroubleshooting.map(step => (
                  <li>• {step}</li>
                ))}
              </ul>
            </div>
          </GuideSubSection>
        </div>

        <div class="mt-6">
          <p class="text-sm text-gray-600">
            Pour plus d'informations techniques, consultez notre
            <a href="/fr/guides/domains-protocols" class="text-primary hover:text-primary/80 underline">
              Guide des domaines & protocoles
            </a>.
          </p>
        </div>
      </GuideStep>

      <div class="mt-16 bg-gradient-to-br from-primary/5 to-blue-500/5 rounded-xl p-8 border border-primary/10">
        <h2 class="text-2xl font-bold text-gray-900 mb-4">Aide-mémoire</h2>
        <div class="grid md:grid-cols-2 gap-6">
          <div>
            <h3 class="font-semibold text-gray-900 mb-2">Problèmes fréquents</h3>
            <ul class="space-y-2 text-gray-600">
              <li>• Invitation non reçue : vérifiez les spams</li>
              <li>• Code 2FA manquant : contrôlez votre mobile</li>
              <li>• Connexion impossible : videz le cache</li>
              <li>• Session expirée : reconnectez-vous</li>
            </ul>
          </div>
          <div>
            <h3 class="font-semibold text-gray-900 mb-2">Bonnes pratiques</h3>
            <ul class="space-y-2 text-gray-600">
              <li>• Choisissez un mot de passe unique</li>
              <li>• Protégez vos codes 2FA</li>
              <li>• Déconnectez-vous des appareils partagés</li>
              <li>• Actualisez régulièrement vos accès</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="mt-8 bg-white rounded-xl p-8 shadow-sm border border-gray-200">
        <h2 class="text-2xl font-bold text-gray-900 mb-4">Besoin d'aide ?</h2>
        <p class="text-gray-600 mb-6">
          Des difficultés pour vous connecter ? Notre équipe support est à votre disposition.
        </p>
        <div class="flex space-x-4">
          <a
            href="/fr/contact"
            class="inline-flex items-center px-6 py-3 text-base font-medium rounded-lg text-white bg-primary hover:bg-primary/90 transition-colors"
          >
            Contacter le support
          </a>
          <a
            href="/fr/guides"
            class="inline-flex items-center px-6 py-3 text-base font-medium rounded-lg text-gray-900 bg-white border border-gray-200 hover:bg-gray-50 transition-colors"
          >
            Tous les guides
          </a>
        </div>
      </div>
    </article>
  </main>
</Layout>